## ğŸ§© **Goal:**

You need to:

1. **Create your own custom Nginx Docker image** (not just use the default one).
2. **Deploy it using Docker Compose.**
3. **Bind mount** a folder from your EC2 instance to the container at `/var/opt/nginx`.
4. **Push your custom image** to **Docker Hub** so itâ€™s stored online.

---

## ğŸ§  **Whatâ€™s happening in this task**

Youâ€™re doing three key things:

1. **Building** a custom Docker image (from your own Dockerfile).
2. **Running** it with Docker Compose and connecting local files to the container using **volumes**.
3. **Publishing** it to Docker Hub so others (or you later) can use it from anywhere.

---

## âš™ï¸ **Step-by-Step Explanation**

### **Step 1 â€” Launch & Connect to EC2**

* Start an **Ubuntu EC2 instance** (e.g. t2.micro).
* SSH into it:

  ```bash
  ssh -i your-key.pem ubuntu@<your-ec2-public-ip>
  ```

---

### **Step 2 â€” Install Docker & Docker Compose**

```bash
sudo apt update
sudo apt install -y docker.io docker-compose
sudo systemctl enable docker
sudo systemctl start docker
```

---

### **Step 3 â€” Create your project folder**

```bash
mkdir custom-nginx
cd custom-nginx
```

---

### **Step 4 â€” Create an HTML file**

Letâ€™s create a simple web page:

```bash
echo "<h1>Welcome from Vijay Ganesh's Custom Nginx!</h1>" > index.html
```

---

### **Step 5 â€” Create a Dockerfile**

This Dockerfile creates your **custom Nginx image**:

```Dockerfile
# Use the official nginx image as base
FROM nginx:alpine

# Copy your webpage into the container
COPY index.html /usr/share/nginx/html/index.html

# Add a label to identify your custom image
LABEL maintainer="vijayganesh5"
```

---

### **Step 6 â€” Build your custom Docker image**

```bash
sudo docker build -t vijayganesh5/custom-nginx .
```

ğŸ“ Here:

* `vijayganesh5/custom-nginx` â†’ your Docker image name (prefix with your Docker Hub username)

---

### **Step 7 â€” Create docker-compose.yml**

This runs your container and uses **bind mount volume** at `/var/opt/nginx`:

```yaml
version: '3'
services:
  nginx:
    image: vijayganesh5/custom-nginx
    ports:
      - "80:80"
    volumes:
      - ./data:/var/opt/nginx
```

ğŸ‘‰ Explanation:

* `./data` â†’ a folder on your EC2 machine
* `/var/opt/nginx` â†’ the folder inside the container (bind-mounted)
* This means any file you put in `./data` will also be visible inside the container at `/var/opt/nginx`.

---

### **Step 8 â€” Run with Docker Compose**

```bash
mkdir data
sudo docker-compose up -d
```

Now your site is live!

---

### **Step 9 â€” Access it**

In your browser, open:

```
http://<your-ec2-public-ip>
```

You should see your custom â€œWelcome from Vijay Ganeshâ€ page.

---

### **Step 10 â€” Push your custom image to Docker Hub**

1. Login to Docker Hub:

   ```bash
   sudo docker login
   ```

   (enter your Docker Hub username & password)

2. Push your image:

   ```bash
   sudo docker push vijayganesh5/custom-nginx
   ```

---

## ğŸ§¹ **Stop and Clean Up**

To stop the container:

```bash
sudo docker-compose down
```

---

